<title>BTM | COMMS Report</title>
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<div class="loader" id="loader"></div>
<div class="container">
	<div class="row">
		<div class="col-12">
			<div class="banner">
				<span class="pull-left"><img src="{{url_for('static', filename='image/logo.png')}}" height="70px"></span> 
				<h4 class="pt-3">BUSINESS TRAVEL MANAGEMENT</h4>
				<h6 class="mt-2">COMMS REPORT</h6>
			</div>
		</div>
	</div>

	<form action="" method="post">
		<div class="det mt-1">
			<div class="row">
				<div class="col-xs-12 col-md-12">
					{% with messages = get_flashed_messages(with_categories=true)%}
							{% if messages %}
								{% for category, message in messages %}
									{% if category == 'success' %}
										{% set icon = 'fa-check-circle' %}
									{% elif category == 'danger' %}
										{% set icon = 'fa-times-circle' %}
									{% elif category == 'info' %}
										{% set icon = 'fa-info-circle' %}
									{% elif category == 'warning' %}
										{% set icon = 'fa-exclamation-circle' %}
									{% else %}
									{% endif %}

									<div class="alert alert-{{category}}" id="alert_msg">
										<i class="fa {{icon}}"></i> {{ message }}
									</div>

									<script>
										setTimeout(function () {
											document.getElementById('alert_msg').style.display = 'None';
										}, 3000)
									</script>
								{% endfor %}
							{% endif %}
						{% endwith %}
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12 col-lg-12">
					<div class="header mt-3 mb-3">				
						<h6>Date: {{today}}</h6>
					</div>
				</div>
				<div class="col-xs-12 col-lg-4">
					<div class="form-group fileds">
						<label for="name">Enter Full Name:</label>
						<input type="text" name="name" id="name" class="form-control form-control-sm" placeholder="Full Name" value="" required>
					</div>
				</div>
				<div class="col-xs-12 col-lg-4">
					<div class="form-group fileds">
						<label for="email">Email:</label>
						<input type="email" name="email" id="email" class="form-control form-control-sm" placeholder="Email Address"  value="comms@btmlimited.net" required>
					</div>
				</div>
				<div class="col-xs-12 col-lg-2">
					<div class="form-group fileds">
						<label for="shift">Select Shift:</label>
						<select class="form-control form-control-sm" required name="shift" id="shift">							
							<option value="Day" selected>Day Shift</option>
							<option value="Night">Night Shift</option>
						</select>
					</div>
				</div>
				<div class="col-xs-12 col-md-2">
					<div class="form-group fileds">
						<label for="date">Date:</label>
						<input type="date" name="date" id="date" class="form-control form-control-sm" value="{{today}}" required>
					</div>
				</div>
			</div>
		</div>
		

		<div class="row mt-2">
			<div class="col-12">
				<div class="sectionbox p-3 mb-3">
					<header class="p-2 mt-2"><b>Activity:</b></header>
					<div class="sectioninner mb-3 p-3" id="sectioninner">
						<div class="row mb-2">
							<div class="col-xs-12 col-md-5">
								<div class="form-group">
									<textarea class="form-control form-control-sm" name="action_point" id="action_point" placeholder="Action Point" rows="3"></textarea>									
								</div>
							</div>
							<div class="col-xs-12 col-md-5">
								<div class="form-group">
									<textarea class="form-control form-control-sm" name="description" id="description" placeholder="Description" rows="3"></textarea>									
								</div>
							</div>
							<div class="col-xs-12 col-md-2">
								<div class="form-group">
									<label><small>Due Date:</small></label>
								<input type="date" name="duedate" id="date" class="form-control form-control-sm">
								</div>
							</div>
							<div class="col-xs-12 col-md-12 mt-3">
								<div class="form-group">
									<textarea class="form-control form-control-sm" name="commentBox" id="commentBox" placeholder="Comment" rows="3"></textarea>									
								</div>
							</div>
							<div class="col-12"><hr></div>
						</div>
						
						<div id="element"></div>
						<div class="row">
							<div class="col-xs-12 col-md-12 mt-3">
								<div class="form-group text-right">
									<button type="button" class="btn btn-sm btn-primary insertitem"><i class="fa fa-plus"></i> Add</button>								
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
		<div class="row mt-2">
			<div class="col-12">
				<div class="submitbox">
					<div class="form-group fileds">
						<small><b>Do you want a copy of your response?</b></small>
						<select class="form-control col-3" required name="mailcopy">
							<option selected value="No">No</option>
							<option value="Yes">Yes</option>
						</select>
					</div>
					<div class="submit">
						<button type="submit" name="submit" value="send" class="btn btn-sm btn-success submit">Submit Report</button>	
						<!-- <button type="submit" name="submit" value="draft" class="btn btn-sm btn-dark submit">Save as Draft</button>	 -->					
					</div>
				</div>
			</div>
		</div>

	</form>

	<div class="row">
		<div class="col-12">
			<hr>
			<footer class="text-center p-2">
				<p>
					<small>BUSINESS TRAVEL MANAGEMENT</small> <br>
					<small><b>&copy; BTML TECH | {{ year }}</b></small>

				</p>
				<p></p>
			</footer>
		</div>
	</div>
</div>


<style>
	.container{
		font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",
                    Roboto,"Helvetica Neue",Arial,"Noto Sans",
                    sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
	}
	.banner{
		text-align: ;
		padding: 10px;
		background: #fff;
		border:1px solid #f8f8f8;
	}
	.banner img{
		height: 50px;
		float: left;
		margin-right: 10px;
	}
	.banner h4{
		padding-top: 10px;
	}
	.sectionbox{
		border:1px solid grey;
		border-radius: 3px
	}
	.sectioninner{
		border:1px solid lightgrey;
		border-radius: 4px;
	}
	textarea.form-control{
		resize: none;
	}
	hr{
		border-color: grey
	}
	
</style> 


<script>
	$(document).ready(function () {
		$('.insertitem').click(function () {
			value = $('.itemlist').length + 1;
			elem_value = value - 1;

			block = `
					<div class="row mb-2 itemlist" id="`+value+`">
						<div class="col-xs-12 col-md-5">
							<div class="form-group">
								<textarea class="form-control form-control-sm" name="action_point" id="action_point" 
									placeholder="Action Point" rows="3"></textarea> 								
							</div>
						</div>
								<div class="col-xs-12 col-md-5">
									<div class="form-group">
										<textarea class="form-control form-control-sm" name="description" id="description" placeholder="Description" rows="3"></textarea>							
									</div>
								</div>
								<div class="col-xs-12 col-md-2">
									<div class="form-group">
										<label><small>Due Date:</small></label>
									<input type="date" name="duedate" id="date" class="form-control form-control-sm">
									</div>
								</div>
								<div class="col-xs-12 col-md-11 mt-3">
									<div class="form-group">
										<textarea class="form-control form-control-sm" name="commentBox" id="commentBox" placeholder="Comment" rows="3"></textarea>							
									</div>
								</div>
								<div class="col-xs-12 col-md-1 mt-5">
									<button class="btn btn-sm btn-danger" onclick="remove(`+value+`)"><i class="fa fa-trash"></i></button>
								</div>
								<div class="col-12"><hr></div>
							</div>

							`;

			$('#element').append(block);
		});
	});

	function value(){
		return $('.itemlist').length + 1;
	}
	
	function remove(getname){
		document.getElementById(getname).remove();
		
	}
</script>